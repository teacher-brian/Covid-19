?geom_line
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
geom_smooth(method='lm',size=.1)+geom_smooth(color='green',size=.1)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
geom_smooth(method='lm',size=.1,se=T)#+geom_smooth(color='green',size=.1)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
library(tidyverse)
library(lubridate)
# read US Cases into Rstudio ----------------------------------------------
covid_cases_us <- read.csv(here::here("data","covid_US_cases_raw.csv"),stringsAsFactors = F)
# tidy up the data for graphing
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
head(covid_cases_us)
str(covid_cases_us)
UID_dates<- covid_cases_us %>% select(UID,X1.22.20:recent_date) %>% gather(key = Date, value= count,-UID)
UID_info<- covid_cases_us %>% select(-c(X1.22.20:recent_date))
covid_US_cases_tidy<- left_join(UID_info,UID_dates,by="UID")
covid_US_cases_tidy<-covid_US_cases_tidy %>% mutate(Date=gsub("X","",Date))
str(covid_US_cases_tidy)
cols<- names(covid_US_cases_tidy[c(1:8,11)])
#Use lapply() to coerce and replace the chosen columns:
covid_US_cases_tidy[cols] <- lapply(covid_US_cases_tidy[cols], factor)  ## as.factor() could also be used
covid_US_cases_tidy$Date<- mdy(covid_US_cases_tidy$Date)
str(covid_US_cases_tidy)
#write.csv(covid_US_cases_tidy,file='./data/covid_US_cases_tidy.csv')
# all us state and then some
drop_state <- c("New York","Massachusetts")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Province_State,Date) %>% arrange(desc(Date))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% #arrange(desc(Date))
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) #%>% #arrange(desc(Date))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% print(.,n=100) #%>% #arrange(desc(Date))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases))
# all us state and then some
drop_state <- c("New York","Massachusetts","California")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% #arrange(desc(Date,new_cases))
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases))
library(here)
library(tidyverse)
library(lubridate)
covid_cases_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv',stringsAsFactors = F)
recent_date <- colnames(covid_cases_us)[length(covid_case
library(here)
library(tidyverse)
library(lubridate)
covid_cases_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv',stringsAsFactors = F)
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
covid_cases_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv',stringsAsFactors = F)
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
write.csv(covid_cases_us,file='./data/covid_US_cases_raw.csv')
covid_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv',stringsAsFactors = F)
write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
library(tidyverse)
library(lubridate)
# read US Cases into Rstudio ----------------------------------------------
covid_cases_us <- read.csv(here::here("data","covid_US_cases_raw.csv"),stringsAsFactors = F)
# tidy up the data for graphing
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
head(covid_cases_us)
str(covid_cases_us)
UID_dates<- covid_cases_us %>% select(UID,X1.22.20:recent_date) %>% gather(key = Date, value= count,-UID)
UID_info<- covid_cases_us %>% select(-c(X1.22.20:recent_date))
covid_US_cases_tidy<- left_join(UID_info,UID_dates,by="UID")
covid_US_cases_tidy<-covid_US_cases_tidy %>% mutate(Date=gsub("X","",Date))
str(covid_US_cases_tidy)
cols<- names(covid_US_cases_tidy[c(1:8,11)])
#Use lapply() to coerce and replace the chosen columns:
covid_US_cases_tidy[cols] <- lapply(covid_US_cases_tidy[cols], factor)  ## as.factor() could also be used
covid_US_cases_tidy$Date<- mdy(covid_US_cases_tidy$Date)
str(covid_US_cases_tidy)
#write.csv(covid_US_cases_tidy,file='./data/covid_US_cases_tidy.csv')
# all us state and then some
drop_state <- c("New York","Massachusetts","California")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
# all us state and then some
drop_state <- c(("New Jersey","New York","Massachusetts","California")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
# all us state and then some
drop_state <- c("New Jersey","New York","Massachusetts","California")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_grid(~Province_State)+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
?facet_wrap
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
# all us state and then some
drop_ship <- ("Diamond Princess","Grand Princess")
# all us state and then some
drop_ship <- c("Diamond Princess","Grand Princess")
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_state,!Province_State %in% drop_ship) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_ship) %>%
#filter(!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
ggtitle("new cases in the States since 4/21")+
#geom_smooth(method='lm',size=.1,se=T)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_ship) %>%
#filter(!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
ggtitle("new cases in the States since 4/21")+
geom_smooth(method='lm',size=.1,se=F)+
geom_smooth(color='pink',size=.3)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_ship) %>%
#filter(!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
ggtitle("new cases in the States since 4/21")+
geom_smooth(method='lm',color='blue',se=F)+
geom_smooth(color='pink',size=.3)
library(tidyverse)
library(lubridate)
library(here)
covid_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv',stringsAsFactors = F)
#write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
recent_date <- colnames(covid_us)[length(covid_us)]
library(tidyverse)
library(lubridate)
library(here)
covid_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv',stringsAsFactors = F)
#write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
recent_date <- colnames(covid_us)[length(covid_us)]
write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
covid_cases_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv',stringsAsFactors = F)
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
write.csv(covid_cases_us,file='./data/covid_US_cases_raw.csv')
covid_cases_us <- read.csv(here::here("data","covid_US_cases_raw.csv"),stringsAsFactors = F)
# tidy up the data for graphing
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
head(covid_cases_us)
str(covid_cases_us)
UID_dates<- covid_cases_us %>% select(UID,X1.22.20:recent_date) %>% gather(key = Date, value= count,-UID)
UID_info<- covid_cases_us %>% select(-c(X1.22.20:recent_date))
covid_US_cases_tidy<- left_join(UID_info,UID_dates,by="UID")
covid_US_cases_tidy<-covid_US_cases_tidy %>% mutate(Date=gsub("X","",Date))
str(covid_US_cases_tidy)
cols<- names(covid_US_cases_tidy[c(1:8,11)])
#Use lapply() to coerce and replace the chosen columns:
covid_US_cases_tidy[cols] <- lapply(covid_US_cases_tidy[cols], factor)  ## as.factor() could also be used
covid_US_cases_tidy$Date<- mdy(covid_US_cases_tidy$Date)
str(covid_US_cases_tidy)
#write.csv(covid_US_cases_tidy,file='./data/covid_US_cases_tidy.csv')
covid_cases_global <- read.csv(here::here("data","time_series_covid19_confirmed_global.csv"),stringsAsFactors = F)
covid_cases_global <- read.csv(here::here("./COVID-19/csse_covid_19_data/csse_covid_19_time_series/","time_series_covid19_confirmed_global.csv"),stringsAsFactors = F)
cg<- covid_cases_global
head(cg)
# tidy up the data for graphing
recent_date <- colnames(cg)[length(cg)]
head(cg)
recent_date
str(cg)
UID_dates<- cg %>% select(UID,X1.22.20:recent_date) %>% gather(key = Date, value= count,-UID)
cg %>% select(X1.22.20:recent_date) %>% gather(key = Date, value= count,-UID)
cg %>% select(Country.Region, Lat, Long,X1.22.20:recent_date) %>% gather(key = Date, value= count,-c(Country.Region,Lat,Long))
UID_dates<- cg %>% select(Country.Region, Lat, Long,X1.22.20:recent_date) %>% gather(key = Date, value= count,-c(Country.Region,Lat,Long))
UID_info<- cg %>% select(-c(X1.22.20:recent_date))
UID_info
countryID_dates<- cg %>% select(Country.Region, Lat, Long,X1.22.20:recent_date) %>% gather(key = Date, value= count,-c(Country.Region,Lat,Long))
countryID_info<- cg %>% select(Country.Region,-c(X1.22.20:recent_date))
cg_tidy<- left_join(countryID_info,countryID_dates,by="Country.Region")
cg_tidy<-cg_tidy %>% mutate(Date=gsub("X","",Date))
str(cg_tidy)
names(cg_tidy[c(1:8,11)])
#Use lapply() to coerce and replace the chosen columns:
cg_tidy$Country.Region <-  factor(cg_tidy$Country.Region)  ## as.factor() could also be used
str(cg_tidy)
cg_tidy$Date<- mdy(cg_tidy$Date)
str(cg_tidy)
write.csv(cg_tidy,file='./data/covid_global_cases_tidy.csv')
cg<- read.csv(here::here('data',file='./data/covid_global_cases_tidy.csv'),stringsAsFactors = F)
write.csv(cg_tidy,file='./data/covid_global_cases_tidy.csv')
getwd()
cg<- read.csv(here::here('data',file='./data/covid_global_cases_tidy.csv'),stringsAsFactors = F)
cg<- read.csv(here::here('data',file='./covid_global_cases_tidy.csv'),stringsAsFactors = F)
str(cg_tidy)
cg<- read.csv(here::here('data',file='./covid_global_cases_tidy.csv'),stringsAsFactors = T)
cg<- read.csv(here::here('data',file='./covid_global_cases_tidy.csv'),stringsAsFactors = F)
cg$Country.Region <- as.factor(cg$Country.Region)
cg$Date <- ymd(cg$Date)
cg %>% ggplot(aes(x=Date,count))+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count))+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count,group=Country.Region))+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count),group=Country.Region)+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count),color=Country.Region)+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count,color=Country.Region))+geom_point()
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count,color=Country.Region))+geom_point()+facet_wrap(~Country.Region)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Admin2,Country_Region)) %>%
group_by(Province_State,Date) %>%
summarise(count=sum(count,na.rm=T)) %>%
filter(Date>"2020-04-20",!Province_State %in% drop_ship) %>%
#filter(!Province_State %in% drop_state) %>%
mutate(new_cases= count-lag(count)) %>%
group_by(Date,Province_State) %>% arrange(desc(Date,new_cases)) %>%
ggplot(aes(x=Date,new_cases))+ geom_point(size=.2)+
geom_line()+
facet_wrap(~Province_State,scales = 'free')+
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count)+geom_point()+facet_wrap(~Country.Region)
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count))+geom_point()+facet_wrap(~Country.Region)
cg %>% group_by(Country.Region) %>% ggplot(aes(x=Date,count))+geom_point()+facet_wrap(~Country.Region,scales = 'free')
countries.of.interest <- c('Sweeden', 'South Korea')
cg %>% group_by(Country.Region) %>% filter(Country.Region %in% countries.of.interest) %>% ggplot(aes(x=Date,count))+geom_point()+facet_wrap(~Country.Region,scales = 'free')
cg %>% select(Country.Region) %>% unique()
cg %>% select(Country.Region) %>% unique() %>% arrange(desc(Country.Region))
countries.of.interest <- c('Sweden', 'Korea, South','US')
cg %>% group_by(Country.Region) %>% filter(Country.Region %in% countries.of.interest) %>% ggplot(aes(x=Date,count))+geom_point()+facet_wrap(~Country.Region,scales = 'free')
51e6
US.pop <- 51e6
sw.pop <- 51e6
sk.pop <- 51e6
US.pop <- 330e6
sw.pop <- 10e6
cg %>%
group_by(Country.Region) %>%
filter(Country.Region %in% countries.of.interest) %>%
mutate(proportion=case_when(Country.Region=='Sweden'~ count/sw.pop,
Country.Region=='Korea, South'~ count/sk.pop,
Country.Region=='US'~ count/us.pop))
cg %>%
group_by(Country.Region) %>%
filter(Country.Region %in% countries.of.interest) %>%
mutate(proportion=case_when(Country.Region=='Sweden'~ count/sw.pop,
Country.Region=='Korea, South'~ count/sk.pop,
Country.Region=='US'~ count/US.pop))
cg %>%
group_by(Country.Region) %>%
filter(Country.Region %in% countries.of.interest) %>%
mutate(proportion=case_when(Country.Region=='Sweden'~ count/sw.pop,
Country.Region=='Korea, South'~ count/sk.pop,
Country.Region=='US'~ count/US.pop)) %>%
ggplot(aes(x=Date,proportion))+geom_point()+facet_wrap(~Country.Region,scales = 'free')
cg %>%
group_by(Country.Region) %>%
filter(Country.Region %in% countries.of.interest) %>%
mutate(proportion=case_when(Country.Region=='Sweden'~ count/sw.pop,
Country.Region=='Korea, South'~ count/sk.pop,
Country.Region=='US'~ count/US.pop)) %>%
ggplot(aes(x=Date,proportion))+geom_point()+facet_wrap(~Country.Region)
rm(list=ls())
covid_cases_global <- read.csv(here::here("./COVID-19/csse_covid_19_data/csse_covid_19_time_series/","time_series_covid19_confirmed_global.csv"),stringsAsFactors = F)
cg<- covid_cases_global
head(cg)
# tidy up the data for graphing
recent_date <- colnames(cg)[length(cg)]
head(cg)
str(cg)
countryID_dates<- cg %>% select(Country.Region, Lat, Long,X1.22.20:recent_date) %>% gather(key = Date, value= count,-c(Country.Region,Lat,Long))
countryID_info<- cg %>% select(Country.Region,-c(X1.22.20:recent_date))
cg_tidy<- left_join(countryID_info,countryID_dates,by="Country.Region")
cg_tidy<-cg_tidy %>% mutate(Date=gsub("X","",Date))
str(cg_tidy)
#Use lapply() to coerce and replace the chosen columns:
cg_tidy$Country.Region <-  factor(cg_tidy$Country.Region)
cg_tidy$Date<- mdy(cg_tidy$Date)
str(cg_tidy)
library(tidyverse)
library(lubridate)
library(here)
covid_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv',stringsAsFactors = F)
#write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
recent_date <- colnames(covid_us)[length(covid_us)]
write.csv(covid_us,file='./data/covid_US_deaths_raw.csv')
recent_date
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
recent_date
covid_cases_us <- read.csv(file='./COVID-19/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv',stringsAsFactors = F)
recent_date
colnames(covid_cases_us)[length(covid_cases_us)]
colnames(covid_cases_us)[length(covid_cases_us)]
recent_date <- colnames(covid_cases_us)[length(covid_cases_us)]
recent_date
write.csv(covid_cases_us,file='./data/covid_US_cases_raw.csv')
covid_cases_global <- read.csv(here::here("./COVID-19/csse_covid_19_data/csse_covid_19_time_series/","time_series_covid19_confirmed_global.csv"),stringsAsFactors = F)
cg<- covid_cases_global
head(cg)
# tidy up the data for graphing
recent_date <- colnames(cg)[length(cg)]
head(cg)
str(cg)
countryID_dates<- cg %>% select(Country.Region, Lat, Long,X1.22.20:recent_date) %>% gather(key = Date, value= count,-c(Country.Region,Lat,Long))
countryID_info<- cg %>% select(Country.Region,-c(X1.22.20:recent_date))
cg_tidy<- left_join(countryID_info,countryID_dates,by="Country.Region")
cg_tidy<-cg_tidy %>% mutate(Date=gsub("X","",Date))
str(cg_tidy)
#Use lapply() to coerce and replace the chosen columns:
cg_tidy$Country.Region <-  factor(cg_tidy$Country.Region)
cg_tidy$Date<- mdy(cg_tidy$Date)
str(cg_tidy)
write.csv(cg_tidy,file='./data/covid_global_cases_tidy.csv')
cg<- read.csv(here::here('data',file='./covid_global_cases_tidy.csv'),stringsAsFactors = F)
cg$Country.Region <- as.factor(cg$Country.Region)
cg$Date <- ymd(cg$Date)
cg
cg$Date
