mutate(count_lag=lag(count,1),new_cases=count-count_lag) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=lag(count,1),new_cases=count-count_lag)
source('~/Projects/Psych217/ZipFilePractice/scripts/covid_US_cases_exporatory_graphs.r', echo=TRUE)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=lag(count,1),new_cases=count-count_lag) %>%
arrange(desc(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=lag(count,1),new_cases=count-count_lag) %>%
arrange(desc(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=lag(count,1)) %>% #,
#new_cases=count-count_lag) %>%
arrange(desc(count))
lag(1:10,1)
cbind(1:10,lag(1:10,1))
cbind('orig'=(1:10)^2,'lag'=lag(1:10,1))
data.frame(cbind('orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
lubridate::date(1:10)
date(1:10)
data.frame(cbind('date'=,'orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
data.frame(cbind('date'=,'orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
data.frame(cbind('orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
source('~/Projects/Psych217/ZipFilePractice/scripts/covid_US_cases_exporatory_graphs.r', echo=TRUE)
data.frame(cbind('orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=lag(count,1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count,1))
data.frame(cbind('orig'=(1:10)^2,'lag'=lag(1:10,1))) %>% mutate(new=orig-lag)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count,-1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count,1)) %>% print(.n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count,1)) %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State,Date) %>%
arrange(desc(count)) %>%
mutate(count_lag=lag(count,1)) %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State,Date) %>%
arrange(desc(count)) -> test.out
test.out
test.out %>% mutate(count_lag=lag(count,1))
?lag
test.out %>% mutate(count_lag=stats::lag(count,1))
test.out %>% mutate(count_lag=stats::lag(count,k=1))
test.out %>% mutate(count_lag=stats::lag(count,k=2))
test.out %>% mutate(count_lag=diff(count,lag=1))
test.out %>% mutate(count_lag=diff(count))
test.out %>% diff(count))
test.out %>% diff(count)
test.out %>% with(count,diff)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% filter(n()>1) %>% arrange(desc(count))
source('~/Projects/Psych217/ZipFilePractice/scripts/covid_US_cases_exporatory_graphs.r', echo=TRUE)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>% filter(n()>1) %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Date,Province_State) %>%
filter(Date>='2020-04-20') %>% filter(n()>1) %>% arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Date,Province_State) %>%
filter(Date>='2020-04-20') %>% filter(n()>1) %>% #arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%  #arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%  #arrange(desc(count)) %>%
mutate(count_lag=lag(count)) %>% arrange(desc(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%  #arrange(desc(count)) %>%
mutate(count_lag=lag(count)) %>% arrange(desc(count_lag))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%  #arrange(desc(count)) %>%
mutate(count_lag=lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%  #arrange(desc(count)) %>%
mutate(count_lag=lag(count))  %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=count-lag(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
group_by(Province_State,Date) %>%
filter(Date>='2020-04-20') %>%
mutate(count_lag=count-lag(count))  %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State,Date) %>%
mutate(count_lag=count-lag(count))  %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(count_lag=count-lag(count))  %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(count_lag=count-lag(count)) %>%
arrange(desc(count))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p+geom_point(shape=18)+geom_line(alpha=.2)+#geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p
p+geom_point(shape=18)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p+geom_point(shape=18)+
#geom_line(alpha=.2)+
#geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20') %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p+geom_point(shape=18)+
#geom_line(alpha=.2)+
#geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p+geom_point(shape=18)+
geom_line(alpha=.2)+
#geom_smooth(se=F)+
facet_wrap(~Province_State)
p+geom_point(shape=18)+
geom_line(alpha=.2)+
#geom_smooth(se=F)+
facet_wrap(~Province_State)
p+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-24',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
#   arrange(desc(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases)) -> p
p+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-24',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-24',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
source('~/Projects/Psych217/ZipFilePractice/scripts/covid_US_cases_exporatory_graphs.r', echo=TRUE)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0) %>% print(.,n=100)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,Province_State == "New York")# %>%
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,Province_State == "New York")# %>%
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000,Province_State == "New York")# %>%
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000,Province_State == "New York") %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000,Province_State=='New York') %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000,Province_State=='New York') %>% summarise(total_new=sum(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-23',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-25',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-26',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>1,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
source('~/Projects/Psych217/ZipFilePractice/scripts/covid_US_cases_exporatory_graphs.r', echo=TRUE)
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0,new_cases<10000) %>% summarise(new_cases=sum(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0,new_cases<10000) %>% summarise(new_cases=sum(new_cases)) %>% arrange(desc(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0) %>% summarise(new_cases=sum(new_cases)) %>% arrange(desc(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0) %>% summarise(new_cases=sum(new_cases)) %>% filter(new_cases<10000) %>% arrange(desc(new_cases))
covid_US_cases_tidy %>%
select(-c(iso2:FIPS,Country_Region)) %>%
filter(Date>='2020-04-20',count>1000) %>%
group_by(Province_State) %>%
mutate(new_cases=count-lag(count)) %>%
group_by(Province_State,Date) %>%
filter(new_cases>0) %>%
summarise(new_cases=sum(new_cases)) %>%
filter(new_cases<10000) %>%
ggplot(aes(Date,new_cases))+geom_point(shape=18)+
#geom_line(alpha=.2)+
geom_smooth(se=F)+
facet_wrap(~Province_State)+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
